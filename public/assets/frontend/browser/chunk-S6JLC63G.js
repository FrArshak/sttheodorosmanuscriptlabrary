import{a as S,b as tt,c as et}from"./chunk-NCE3LJEG.js";import{a as $}from"./chunk-AOEDNFZC.js";import{$ as J,J as z,N as G,O as U,P as N,R as q,U as Z,W as u,X as Y,Y as Q,_ as W,ba as K,da as X}from"./chunk-CK5DGHQM.js";import{Bb as f,Eb as c,Gb as p,Gc as j,Jb as V,Jc as F,Lb as B,Mb as L,Nb as H,Qb as l,Rb as T,Ua as E,Y as k,Ya as m,Yb as R,Za as x,fa as b,ga as y,oa as A,pa as h,qa as _,qb as P,ra as v,sa as M,sb as g,tb as w,wb as e,xb as n,yb as d}from"./chunk-HD5U724E.js";import"./chunk-UGUGGRN7.js";S.register(...tt);var O=(()=>{let r=class r{constructor(i){this.router=i,this.currentRoute="",this.dashboardFlag=!0,this.settingsFlag=!1}ngOnInit(){this.router.events.subscribe(()=>{this.currentRoute=this.router.url,this.currentRoute.includes("dashboard")?(this.dashboardFlag=!0,this.settingsFlag=!1):this.currentRoute.includes("settings")&&(this.dashboardFlag=!1,this.settingsFlag=!0)})}};r.\u0275fac=function(t){return new(t||r)(x(G))},r.\u0275cmp=b({type:r,selectors:[["sidebar"]],standalone:!0,features:[R],decls:10,vars:4,consts:[[1,"sidebar"],[1,"nav"],[1,"nav-menu"],["routerLink","/dashboard"],["routerLink","/settings"],[1,"logout"],[1,"btn","logout-btn"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"nav",1)(2,"ul",2)(3,"a",3),l(4,"Dashboard"),n(),e(5,"a",4),l(6,"Settings"),n()()(),e(7,"div",5)(8,"div",6),l(9,"Logout"),n()()()),t&2&&(m(3),w("active",o.dashboardFlag),m(2),w("active",o.settingsFlag))},dependencies:[U,F],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:240px;height:100vh;background:#273142}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;padding:6px 6px 6px 12px;box-sizing:border-box;margin-top:5px;border-radius:4px;color:#fff;width:100%;font-size:14px;text-decoration:none}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#2153b6}.sidebar[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{padding:25px 15px;box-sizing:border-box}.sidebar[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{padding:15px 35px;width:190px;box-sizing:border-box;text-align:center}"]});let a=r;return a})();var at=["lineChart"],it=(()=>{let r=class r{constructor(i){this.statisticsService=i,this.chartData={x:[""],y:{visitors:[0],reloads:[0]}},this.totalVisitor=0,this.totalRefreshes=0,this.lineData={labels:[""],datasets:[{data:[0],label:"Visitors",borderColor:"#242764"},{data:[0],label:"Page Reloads",fill:!0,borderColor:"#242764"}]},this.notFirstTime=!1,this.clicked=!1}ngOnInit(){this.getData("week")}ngOnChanges(i){}getData(i){this.statisticsService.getStatisticsData(i).subscribe({next:t=>{if(t.success===0)throw new Error(t.message);this.chartData.x=t.pageReloads.x,console.log(this.chartData.x),this.chartData.y.visitors=t.visitors.y,this.chartData.y.reloads=t.pageReloads.y,this.totalVisitor=t.visitorsCount,this.totalRefreshes=t.pageReloadsCount,this.createChart(),this.notFirstTime=!0},error:t=>{console.error("Error fetching statistics data:",t)}})}createChart(){this.notFirstTime?this.chart&&this.chart.data&&this.chart.data.datasets&&(this.chart.destroy(),this.chart=new S(this.chartRef.nativeElement,{type:"line",data:{labels:this.chartData.x,datasets:[{data:this.chartData.y.visitors,label:"Visitors",borderColor:"#242764",fill:!0,pointBackgroundColor:"#242764",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#242764"},{data:this.chartData.y.reloads,label:"Page Reloads",borderColor:"#FF5733",fill:!0,tension:.4,pointBackgroundColor:"#FF5733",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#FF5733"}]},options:{responsive:!0,maintainAspectRatio:!1}})):this.chartRef&&(this.chart=new S(this.chartRef.nativeElement,{type:"line",data:{labels:this.chartData.x,datasets:[{data:this.chartData.y.visitors,label:"Visitors",borderColor:"#242764",fill:!0,pointBackgroundColor:"#242764",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#242764"},{data:this.chartData.y.reloads,label:"Page Reloads",borderColor:"#FF5733",fill:!0,tension:.4,pointBackgroundColor:"#FF5733",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#FF5733"}]},options:{responsive:!0,maintainAspectRatio:!1}}))}onBtnClick(){this.clicked=!0,setTimeout(()=>{this.clicked=!1},100)}updateChart(){this.chart&&(this.chart.data.labels=this.chartData.x,this.chart.data.datasets[0].data=this.chartData.y.visitors,this.chart.data.datasets[1].data=this.chartData.y.reloads,this.chart.update())}};r.\u0275fac=function(t){return new(t||r)(x(et))},r.\u0275cmp=b({type:r,selectors:[["app-dashboard"]],viewQuery:function(t,o){if(t&1&&B(at,7),t&2){let C;L(C=H())&&(o.chartRef=C.first)}},features:[A],decls:39,vars:6,consts:[["lineChart",""],[1,"dashboard"],[1,"sidebar"],[1,"dashboard-content"],[1,"title"],[1,"stat-boxes"],[1,"stat-box"],[1,"stat-box-info"],[1,"stat-box-title"],[1,"stat-box-amount"],[1,"stat-box-icon"],["width","60","height","60","viewBox","0 0 60 60","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.842657","fill-rule","evenodd","clip-rule","evenodd","d","M0 30V37C0 49.7025 10.2975 60 23 60H30H37C49.7025 60 60 49.7025 60 37V30V23C60 10.2975 49.7025 0 37 0H30H23C10.2975 0 0 10.2975 0 23V30Z","fill","#8280FF"],["opacity","0.587821","fill-rule","evenodd","clip-rule","evenodd","d","M20.6667 23.3333C20.6667 26.2789 23.0545 28.6667 26 28.6667C28.9455 28.6667 31.3333 26.2789 31.3333 23.3333C31.3333 20.3878 28.9455 18 26 18C23.0545 18 20.6667 20.3878 20.6667 23.3333ZM34 28.6667C34 30.8758 35.7909 32.6667 38 32.6667C40.2091 32.6667 42 30.8758 42 28.6667C42 26.4575 40.2091 24.6667 38 24.6667C35.7909 24.6667 34 26.4575 34 28.6667Z","fill","white"],["fill-rule","evenodd","clip-rule","evenodd","d","M25.9778 31.3334C19.6826 31.3334 14.5177 34.5687 14.0009 40.9323C13.9727 41.2789 14.6356 42 14.97 42H36.9956C37.9972 42 38.0128 41.194 37.9972 40.9334C37.6065 34.391 32.3616 31.3334 25.9778 31.3334ZM45.2746 42L40.1333 42C40.1333 38.9988 39.1417 36.2292 37.4683 34.0009C42.0103 34.0505 45.7189 36.3469 45.998 41.2C46.0092 41.3955 45.998 42 45.2746 42Z","fill","white"],["opacity","0.847354","fill-rule","evenodd","clip-rule","evenodd","d","M0 30V37C0 49.7025 10.2975 60 23 60H30H37C49.7025 60 60 49.7025 60 37V30V23C60 10.2975 49.7025 0 37 0H30H23C10.2975 0 0 10.2975 0 23V30Z","fill","#44BE85"],["opacity","0.78","fill-rule","evenodd","clip-rule","evenodd","d","M28.6312 23.8088C28.6512 23.5483 28.8684 23.3472 29.1297 23.3472H29.5475C29.8044 23.3472 30.0195 23.5418 30.045 23.7974L30.6667 30.0138L35.0814 32.5365C35.2372 32.6256 35.3333 32.7912 35.3333 32.9707V33.3592C35.3333 33.6889 35.0199 33.9283 34.7018 33.8416L28.3987 32.1226C28.1673 32.0595 28.0133 31.841 28.0317 31.6018L28.6312 23.8088Z","fill","white"],["opacity","0.901274","fill-rule","evenodd","clip-rule","evenodd","d","M22.7218 14.9843C22.4577 14.6696 21.9477 14.7901 21.8524 15.1897L20.2189 22.0379C20.1412 22.3635 20.3993 22.672 20.7336 22.6531L27.7783 22.2539C28.1892 22.2306 28.3976 21.7485 28.133 21.4333L26.3316 19.2864C27.4965 18.8884 28.7317 18.6805 30 18.6805C36.2592 18.6805 41.3333 23.7546 41.3333 30.0138C41.3333 36.273 36.2592 41.3471 30 41.3471C23.7408 41.3471 18.6667 36.273 18.6667 30.0138C18.6667 28.963 18.809 27.9339 19.0864 26.9448L16.5188 26.2245C16.1808 27.4297 16 28.7006 16 30.0138C16 37.7458 22.268 44.0138 30 44.0138C37.732 44.0138 44 37.7458 44 30.0138C44 22.2818 37.732 16.0138 30 16.0138C28.0551 16.0138 26.2029 16.4104 24.5197 17.1271L22.7218 14.9843Z","fill","white"],[1,"dashboard-actions"],[1,"btn","week",3,"click"],[1,"btn","month",3,"click"],[1,"btn","year",3,"click"],[1,"chart"]],template:function(t,o){if(t&1){let C=f();e(0,"div",1)(1,"div",2),d(2,"sidebar"),n(),e(3,"div",3)(4,"div",4),l(5," Dashboard "),n(),e(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),l(10,"Total Visitor"),n(),e(11,"div",9),l(12),n()(),e(13,"div",10),v(),e(14,"svg",11),d(15,"path",12)(16,"path",13)(17,"path",14),n()()(),M(),e(18,"div",6)(19,"div",7)(20,"div",8),l(21,"Total Refresher"),n(),e(22,"div",9),l(23),n()(),e(24,"div",10),v(),e(25,"svg",11),d(26,"path",15)(27,"path",16)(28,"path",17),n()()(),M(),e(29,"div",18)(30,"div",19),c("click",function(){return h(C),_(o.getData("week"))}),l(31,"Week"),n(),e(32,"div",20),c("click",function(){return h(C),_(o.getData("month"))}),l(33,"Month"),n(),e(34,"div",21),c("click",function(){return h(C),_(o.getData("year"))}),l(35,"Year"),n()()(),e(36,"div",22),d(37,"canvas",null,0),n()()()}t&2&&(m(12),T(o.totalVisitor),m(11),T(o.totalRefreshes),m(7),w("clicked",o.clicked),m(2),w("clicked",o.clicked))},dependencies:[O],styles:[".dashboard[_ngcontent-%COMP%]{background:#1f222e;width:100%;height:auto;display:flex}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]{padding-left:260px;padding-top:50px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:30px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;column-gap:40px;margin-bottom:30px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:14px;background:#273142;width:262px;height:150px;box-sizing:border-box;padding:16px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-box-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-box-info[_ngcontent-%COMP%]   .stat-box-title[_ngcontent-%COMP%]{font-size:16px;color:#d9d9d9;font-weight:600}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-box-info[_ngcontent-%COMP%]   .stat-box-amount[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .dashboard-actions[_ngcontent-%COMP%]{display:flex;column-gap:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .dashboard-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .dashboard-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#5151ff}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .stat-boxes[_ngcontent-%COMP%]   .dashboard-actions[_ngcontent-%COMP%]   .btn.clicked[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_btn-animation .3s ease-in-out}.dashboard[_ngcontent-%COMP%]   .dashboard-content[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{width:1138px;height:444px;background:#273142}@keyframes _ngcontent-%COMP%_btn-animation{0%{transform:translateY(0)}40%{transform:translateY(1px)}80%{transform:translateY(3px)}to{transform:translateY(0)}}"]});let a=r;return a})();function rt(a,r){if(a&1){let s=f();e(0,"div",27),d(1,"label",28),e(2,"input",29),c("change",function(t){h(s);let o=p(2);return _(o.onFileSelected(t,o.adminFormFlag?"current":"new"))}),n(),e(3,"span"),l(4,"Upload Photo"),n()()}}function dt(a,r){if(a&1){let s=f();e(0,"div",30)(1,"div",31),c("click",function(){h(s);let t=p(2);return _(t.deleteUploadedImg(t.adminFormFlag?t.img:t.newAdminImg))}),v(),e(2,"svg",32),d(3,"g",33)(4,"g",34),e(5,"g",35)(6,"g"),d(7,"path",36),n()()()(),M(),d(8,"img",37),n()}if(a&2){let s=p(2);m(8),V("src","/storage/",s.adminFormFlag?s.img:s.newAdminImg,"",E)}}function lt(a,r){if(a&1){let s=f();e(0,"div",38),c("click",function(){h(s);let t=p(2);return _(t.togglePassword())}),v(),e(1,"svg",39),d(2,"g",33)(3,"g",34),e(4,"g",35),d(5,"path",40)(6,"path",41)(7,"path",42),n()()()}}function mt(a,r){if(a&1){let s=f();e(0,"div",43),c("click",function(){h(s);let t=p(2);return _(t.togglePassword())}),v(),e(1,"svg",39,0),d(3,"g",33)(4,"g",34),e(5,"g",35),d(6,"path",44)(7,"path",45)(8,"circle",46),n()()()}}function ct(a,r){if(a&1){let s=f();e(0,"div",38),c("click",function(){h(s);let t=p(3);return _(t.toggleNewPassword())}),v(),e(1,"svg",39),d(2,"g",33)(3,"g",34),e(4,"g",35),d(5,"path",40)(6,"path",41)(7,"path",42),n()()()}}function gt(a,r){if(a&1){let s=f();e(0,"div",43),c("click",function(){h(s);let t=p(3);return _(t.toggleNewPassword())}),v(),e(1,"svg",39,0),d(3,"g",33)(4,"g",34),e(5,"g",35),d(6,"path",44)(7,"path",45)(8,"circle",46),n()()()}}function pt(a,r){if(a&1&&(e(0,"div",18)(1,"label",47),l(2,"New Password"),n(),d(3,"input",48),P(4,ct,8,0,"div",21)(5,gt,9,0,"div",22),n()),a&2){let s=p(2);m(3),g("type",s.newPasswordType),m(),g("ngIf",!s.showNewPassword),m(),g("ngIf",s.showNewPassword)}}function ht(a,r){if(a&1){let s=f();e(0,"div",38),c("click",function(){h(s);let t=p(2);return _(t.toggleNewPasswordConfirm())}),v(),e(1,"svg",39),d(2,"g",33)(3,"g",34),e(4,"g",35),d(5,"path",40)(6,"path",41)(7,"path",42),n()()()}}function _t(a,r){if(a&1){let s=f();e(0,"div",43),c("click",function(){h(s);let t=p(2);return _(t.toggleNewPasswordConfirm())}),v(),e(1,"svg",39,0),d(3,"g",33)(4,"g",34),e(5,"g",35),d(6,"path",44)(7,"path",45)(8,"circle",46),n()()()}}function ut(a,r){if(a&1){let s=f();e(0,"div",8)(1,"div",9),P(2,rt,5,0,"div",10)(3,dt,9,2,"div",11),n(),e(4,"div",12)(5,"div",13)(6,"label",14),l(7,"Full Name"),n(),d(8,"input",15),n(),e(9,"div",13)(10,"label",16),l(11,"Email"),n(),d(12,"input",17),n(),e(13,"div",18)(14,"label",19),l(15,"Password"),n(),d(16,"input",20),P(17,lt,8,0,"div",21)(18,mt,9,0,"div",22),n(),P(19,pt,6,3,"div",23),e(20,"div",18)(21,"label",24),l(22,"Confirm the New Password"),n(),d(23,"input",25),P(24,ht,8,0,"div",21)(25,_t,9,0,"div",22),n()(),e(26,"button",26),c("click",function(){h(s);let t=p();return _(t.createNewAdminFlag?t.createNewAdmin():t.updateAdminInfo())}),l(27,"Update Info"),n()()}if(a&2){let s=p();g("formGroup",s.adminForm),m(2),g("ngIf",s.adminFormFlag?!s.imgIsAdded:!s.newAdminImgIsAdded),m(),g("ngIf",s.adminFormFlag?s.imgIsAdded:s.newAdminImgIsAdded),m(13),g("type",s.passwordType),m(),g("ngIf",!s.showPassword),m(),g("ngIf",s.showPassword),m(),g("ngIf",s.adminFormFlag),m(4),g("type",s.newPasswordConfirmType),m(),g("ngIf",!s.showNewPasswordConfirm),m(),g("ngIf",s.showNewPasswordConfirm)}}function ft(a,r){if(a&1){let s=f();e(0,"div",27),d(1,"label",70),e(2,"input",71),c("change",function(t){h(s);let o=p(2);return _(o.onFileSelected(t,"logo"))}),n(),e(3,"span"),l(4,"Upload Photo"),n()()}}function Ct(a,r){if(a&1){let s=f();e(0,"div",30)(1,"div",31),c("click",function(){h(s);let t=p(2);return _(t.deleteUploadedImg(t.logoImg,!0))}),v(),e(2,"svg",32),d(3,"g",33)(4,"g",34),e(5,"g",35)(6,"g"),d(7,"path",36),n()()()(),M(),d(8,"img",37),n()}if(a&2){let s=p(2);m(8),V("src","/storage/",s.logoImg,"",E)}}function vt(a,r){if(a&1){let s=f();e(0,"div",8)(1,"div",9),P(2,ft,5,0,"div",10)(3,Ct,9,2,"div",11),n(),e(4,"div",49)(5,"div",13)(6,"label",50),l(7,"Company Name"),n(),d(8,"input",51),n(),e(9,"div",13)(10,"label",52),l(11,"Address"),n(),d(12,"input",53),n()(),e(13,"div",49)(14,"div",13)(15,"label",54),l(16,"Phone"),n(),d(17,"input",55),n(),e(18,"div",13)(19,"label",56),l(20,"Email"),n(),d(21,"input",57),n()(),e(22,"div",49)(23,"div",13)(24,"label",58),l(25,"Fax"),n(),d(26,"input",59),n(),e(27,"div",13)(28,"label",60),l(29,"Business Hours "),n(),d(30,"input",61),n()(),e(31,"div",49)(32,"div",13)(33,"label",62),l(34,"Meta Title"),n(),d(35,"input",63),n(),e(36,"div",13)(37,"label",64),l(38,"Meta Description"),n(),d(39,"input",65),n()(),e(40,"div",49)(41,"div",13)(42,"label",66),l(43,"Address on Map"),n(),d(44,"input",67),n(),e(45,"div",13)(46,"label",68),l(47,"Donation link"),n(),d(48,"input",69),n()(),e(49,"div",6),c("click",function(){h(s);let t=p();return _(t.updateSettings())}),l(50,"Update Settings"),n()()}if(a&2){let s=p();g("formGroup",s.settingsForm),m(2),g("ngIf",!s.logoIsAdded),m(),g("ngIf",s.logoIsAdded)}}var ot=(()=>{let r=class r{constructor(i,t,o,C){this.settingsService=i,this.postService=t,this.snackBar=o,this.fb=C,this.adminFormFlag=!1,this.createNewAdminFlag=!1,this.pageSettingsFlag=!0,this.formData=null,this.img="",this.newAdminImg="",this.logoImg="",this.imgIsAdded=!1,this.newAdminImgIsAdded=!1,this.logoIsAdded=!1,this.showPassword=!1,this.showNewPassword=!1,this.showNewPasswordConfirm=!1,this.passwordType="password",this.newPasswordType="password",this.newPasswordConfirmType="password",this.adminForm=this.fb.group({name:["",u.required],email:["",u.email],password:["",u.required],newPassword:["",u.required],newPasswordConfirm:["",u.required]}),this.settingsForm=this.fb.group({companyName:["",u.required],address:["",u.required],phone:["",u.required],email:["",u.required],fax:["",u.required],businessHours:["",u.required],metaTitle:["",u.required],metaDesc:["",u.required],addressOnMap:["",u.required],donationLink:["",u.required]})}ngOnInit(){this.getAdminsInfo(),this.getSettings()}onFileSelected(i,t){let o=i.target;if(o.files&&o.files.length>0){let C=o.files[0];this.uploadFile(C,t)}}uploadFile(i,t){this.formData=new FormData,t==="logo"?(this.formData?.append("image",i),this.settingsService.sendUploadedLogo(this.formData).subscribe({next:o=>{this.logoImg=o.logo,this.logoIsAdded=!0},error:o=>this.snackBar.open(o.message)})):(this.formData?.append("image",i),this.postService.sendUploadedImage(this.formData).subscribe({next:o=>{t==="current"?(this.img=o.image,this.imgIsAdded=!0):t==="new"&&(this.newAdminImg=o.image,this.newAdminImgIsAdded=!0)},error:o=>this.snackBar.open(o.message)}))}deleteUploadedImg(i,t=!1){t?this.settingsService.deleteUploadedLogo(i).subscribe({next:o=>{o.success===0&&this.snackBar.open(o.message),this.logoIsAdded=!1},error:o=>{throw new Error(o.message)}}):this.postService.deleteUploadedImg(i).subscribe({next:o=>{o.success===0&&this.snackBar.open(o.message),this.imgIsAdded=!1},error:o=>{throw new Error(o.message)}})}togglePassword(){this.showPassword=!this.showPassword,this.passwordType=this.passwordType==="password"?"text":"password"}toggleNewPassword(){this.showPassword=!this.showPassword,this.newPasswordType=this.newPasswordType==="password"?"text":"password"}toggleNewPasswordConfirm(){this.showPassword=!this.showPassword,this.newPasswordConfirmType=this.newPasswordConfirmType==="password"?"text":"password"}createNewAdmin(){this.adminForm.value.name&&this.adminForm.value.email&&this.adminForm.value.password&&this.adminForm.value.newPasswordConfirm&&this.settingsService.createNewAdmin(this.adminForm.value.name,this.adminForm.value.email,this.adminForm.value.password,this.adminForm.value.newPasswordConfirm).subscribe({next:i=>{if(i.success===0)throw new Error(i.message);this.snackBar.open(i.message),this.changeTheInnerSettings("create-new"),console.log(i)}})}updateAdminInfo(){let i=localStorage.getItem("userId");if(i&&this.adminForm.value.name&&this.adminForm.value.email){let t={avatar:this.img,name:this.adminForm.value.name,email:this.adminForm.value.email};this.adminForm.value.password&&(t.password=this.adminForm.value.password),this.adminForm.value.newPassword&&(t.newPassword=this.adminForm.value.newPassword),this.adminForm.value.newPasswordConfirm&&(t.newPasswordConfirm=this.adminForm.value.newPasswordConfirm),this.settingsService.updateAdminsInfo(t,i).subscribe({next:o=>{if(o.success===0)throw new Error(o.message);this.snackBar.open(o.message),this.adminForm.setValue({name:this.adminForm.value.name,email:this.adminForm.value.email,password:"",newPassword:"",newPasswordConfirm:""})},error:o=>{console.error("Error updating admin info:",o)}})}}getAdminsInfo(){this.settingsService.getUserInfo().subscribe({next:i=>{i.success===0&&this.snackBar.open(i.message),this.img=i.authUser.avatar,this.imgIsAdded=!0,this.adminForm.setValue({name:i.authUser.name,email:i.authUser.email,password:"",newPassword:"",newPasswordConfirm:""})}})}updateSettings(){this.settingsService.updateSettings(this.img,this.settingsForm.value.companyName,this.settingsForm.value.address,this.settingsForm.value.phone,this.settingsForm.value.email,this.settingsForm.value.fax,this.settingsForm.value.businessHours,this.settingsForm.value.metaTitle,this.settingsForm.value.metaDesc,this.settingsForm.value.addressOnMap,this.settingsForm.value.donationLink).subscribe({next:i=>{if(i.success===0)throw new Error(i.message);this.snackBar.open(i.message)}})}getSettings(){this.settingsService.getSettings().subscribe({next:i=>{if(i.success===0)throw new Error(i.message);let t=i;t&&(console.log(t),this.logoIsAdded=!1,this.settingsForm.setValue({companyName:t.settings.companyName.setting_value,address:t.settings.address.setting_value,phone:t.settings.phone.setting_value,email:t.settings.email.setting_value,fax:t.settings.fax.setting_value,businessHours:t.settings.businessHours.setting_value,metaTitle:t.settings.metaTitle.setting_value,metaDesc:t.settings.metaDesc.setting_value,addressOnMap:t.settings.addressOnMap.setting_value,donationLink:t.settings.donationLink.setting_value}))}})}changeTheInnerSettings(i){i==="admin-info"?(this.getAdminsInfo(),this.adminFormFlag=!0,this.pageSettingsFlag=!1,this.createNewAdminFlag=!1):i==="create-new"?(this.adminForm.setValue({name:"",email:"",password:"",newPassword:"",newPasswordConfirm:""}),this.adminFormFlag=!1,this.createNewAdminFlag=!0,this.pageSettingsFlag=!1):i==="settings"&&(this.getSettings(),this.adminFormFlag=!1,this.createNewAdminFlag=!1,this.pageSettingsFlag=!0)}};r.\u0275fac=function(t){return new(t||r)(x($),x(q),x(z),x(K))},r.\u0275cmp=b({type:r,selectors:[["settings"]],decls:15,vars:8,consts:[["password",""],[1,"settings"],[1,"sidebar"],[1,"settings-container"],[1,"title","settings-title"],[1,"settings-actions"],[1,"btn",3,"click"],["class","settings-items",3,"formGroup",4,"ngIf"],[1,"settings-items",3,"formGroup"],[1,"setting-item","img"],["class","not-added-img",4,"ngIf"],["class","added-img",4,"ngIf"],[1,"setting-items-container"],[1,"setting-item"],["for","name"],["type","text","formControlName","name","id","name"],["for","email"],["type","email","formControlName","email","id","email"],[1,"setting-item","password"],["for","password"],["formControlName","password","id","password",3,"type"],["class","hidePassword",3,"click",4,"ngIf"],["class","showPassword",3,"click",4,"ngIf"],["class","setting-item password",4,"ngIf"],["for","password-confirm"],["formControlName","newPasswordConfirm","id","password-confirm",3,"type"],[1,"btn","update-btn",3,"click"],[1,"not-added-img"],["for","img",2,"background-image","url('/storage/admin-bg.png')"],["type","file","id","img",3,"change"],[1,"added-img"],[1,"delete-uploaded-img",3,"click"],["height","200px","width","200px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 26 26",0,"xml","space","preserve","fill","#000000"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M21.125,0H4.875C2.182,0,0,2.182,0,4.875v16.25C0,23.818,2.182,26,4.875,26h16.25 C23.818,26,26,23.818,26,21.125V4.875C26,2.182,23.818,0,21.125,0z M18.78,17.394l-1.388,1.387c-0.254,0.255-0.67,0.255-0.924,0 L13,15.313L9.533,18.78c-0.255,0.255-0.67,0.255-0.925-0.002L7.22,17.394c-0.253-0.256-0.253-0.669,0-0.926l3.468-3.467 L7.221,9.534c-0.254-0.256-0.254-0.672,0-0.925l1.388-1.388c0.255-0.257,0.671-0.257,0.925,0L13,10.689l3.468-3.468 c0.255-0.257,0.671-0.257,0.924,0l1.388,1.386c0.254,0.255,0.254,0.671,0.001,0.927l-3.468,3.467l3.468,3.467 C19.033,16.725,19.033,17.138,18.78,17.394z",2,"fill","#030104"],["alt","",3,"src"],[1,"hidePassword",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M2 2L22 22","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M6.71277 6.7226C3.66479 8.79527 2 12 2 12C2 12 5.63636 19 12 19C14.0503 19 15.8174 18.2734 17.2711 17.2884M11 5.05822C11.3254 5.02013 11.6588 5 12 5C18.3636 5 22 12 22 12C22 12 21.3082 13.3317 20 14.8335","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 14.2362C13.4692 14.7112 12.7684 15.0001 12 15.0001C10.3431 15.0001 9 13.657 9 12.0001C9 11.1764 9.33193 10.4303 9.86932 9.88818","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"showPassword",3,"click"],["d","M1 12C1 12 5 4 12 4C19 4 23 12 23 12","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M1 12C1 12 5 20 12 20C19 20 23 12 23 12","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","3","stroke","#000000","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["for","new-password"],["formControlName","newPassword","id","new-password",3,"type"],[1,"setting-items-container","setting"],["for","company-name"],["type","text","formControlName","companyName","id","company-name"],["for","address"],["type","text","formControlName","address","id","address"],["for","phone"],["type","text","formControlName","phone","id","phone"],["for","emailOfficial"],["type","email","formControlName","email","id","emailOfficial"],["for","fax"],["type","text","formControlName","fax","id","fax"],["for","business-hours"],["type","text","formControlName","businessHours","id","business-hours"],["for","metaTitle"],["type","text","formControlName","metaTitle","id","metaTitle"],["for","metaDesc"],["type","text","formControlName","metaDesc","id","metaDesc"],["for","addressOnMap"],["type","text","formControlName","addressOnMap","id","addressOnMap"],["for","donation-link"],["type","text","formControlName","donationLink","id","donation-link"],["for","logo-img",2,"background-image","url('/storage/admin-bg.png')"],["type","file","id","logo-img",3,"change"]],template:function(t,o){t&1&&(e(0,"div",1)(1,"div",2),d(2,"sidebar"),n(),e(3,"div",3)(4,"div",4),l(5," Settings "),n(),e(6,"div",5)(7,"button",6),c("click",function(){return o.changeTheInnerSettings("admin-info")}),l(8,"Admin Info"),n(),e(9,"button",6),c("click",function(){return o.changeTheInnerSettings("create-new")}),l(10,"Create New Admin"),n(),e(11,"button",6),c("click",function(){return o.changeTheInnerSettings("settings")}),l(12,"Settings"),n()(),P(13,ut,28,10,"div",7)(14,vt,51,3,"div",7),n()()),t&2&&(m(7),w("active",o.adminFormFlag),m(2),w("active",o.createNewAdminFlag),m(2),w("active",o.pageSettingsFlag),m(2),g("ngIf",o.adminFormFlag||o.createNewAdminFlag),m(),g("ngIf",o.pageSettingsFlag))},dependencies:[j,Z,Y,Q,W,J,O],styles:[".settings[_ngcontent-%COMP%]{display:flex;column-gap:250px;width:100%;padding-bottom:60px;background:#1f222e}.settings[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]{margin-bottom:40px}.settings[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .settings-actions[_ngcontent-%COMP%]{margin-bottom:20px}.settings[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .settings-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{cursor:pointer;font-size:12px;width:120px;padding:8px 6px;box-sizing:border-box;background:transparent}.settings[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]   .settings-actions[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#3333fd}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]{padding:80px;box-sizing:border-box;width:1140px;height:795px;background:#273142;margin:0 auto;border-radius:8px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-items-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;row-gap:25px}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-items-container.setting[_ngcontent-%COMP%]{flex-direction:row;column-gap:20px}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;align-items:flex-start;justify-content:center}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fff}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:360px;height:52px;padding:18px 18px 18px 15px;box-sizing:border-box;outline:none;border:none;font-size:16px;color:#fff;border-radius:4px;background:#323d4e}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]{position:relative;width:360px}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]{width:80px;height:80px;position:absolute;top:-65px;left:40%}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-position:center;background-size:cover;background-repeat:no-repeat}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:80px;height:80px}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .not-added-img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;display:inline-block;position:absolute;bottom:-15px;font-size:14px;width:100px}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .added-img[_ngcontent-%COMP%]{width:80px;height:80px;position:absolute;top:-65px;left:40%}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .added-img[_ngcontent-%COMP%]:hover   .delete-uploaded-img[_ngcontent-%COMP%]{opacity:1}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .added-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;object-position:center}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .added-img[_ngcontent-%COMP%]   .delete-uploaded-img[_ngcontent-%COMP%]{cursor:pointer;opacity:0;position:absolute;width:15px;height:15px;right:-5px;top:0;transition:all .3s ease-in-out}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.img[_ngcontent-%COMP%]   .added-img[_ngcontent-%COMP%]   .delete-uploaded-img[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.password[_ngcontent-%COMP%]{position:relative}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.password[_ngcontent-%COMP%]   .showPassword[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.password[_ngcontent-%COMP%]   .hidePassword[_ngcontent-%COMP%]{position:absolute;right:10px;top:52%;cursor:pointer}.settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.password[_ngcontent-%COMP%]   .showPassword[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]   .settings-items[_ngcontent-%COMP%]   .setting-item.password[_ngcontent-%COMP%]   .hidePassword[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;fill:#fff}"]});let a=r;return a})();var wt=[{path:"dashboard",component:it,data:{animation:"DashboardComponent"}},{path:"settings",component:ot,data:{animation:"Settings"}}],st=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y({type:r}),r.\u0275inj=k({imports:[N.forChild(wt),N]});let a=r;return a})();var Wt=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y({type:r}),r.\u0275inj=k({imports:[F,X,st,O]});let a=r;return a})();export{Wt as AdminModule};
